<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>éªŒè¯ç +å¯†ç æå–ï¼ˆæ”¯æŒä»…é“¾æ¥ï¼‰</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    textarea { width: 100%; height: 200px; margin-bottom: 10px; }
    pre { background: #f7f7f7; padding: 10px; white-space: pre-wrap; border: 1px solid #ccc; }
    button { padding: 10px 20px; }
  </style>
</head>
<body>
  <h2>æå– Telegram éªŒè¯ç  + äºŒçº§å¯†ç ï¼ˆæ”¯æŒä»…é“¾æ¥è¾“å…¥ï¼‰</h2>
  <p>æ”¯æŒæ ¼å¼ï¼š<br>
  <code>æ‰‹æœºå·|é“¾æ¥</code>ã€<code>æ‰‹æœºå·,é“¾æ¥</code>ã€<code>æ‰‹æœºå· é“¾æ¥</code>ã€<code>ç”µè¯:... é“¾æ¥:...</code>ã€<code>ä»…é“¾æ¥</code></p>
  <textarea id="input"></textarea>
  <br/>
  <button onclick="extractAll()">å¼€å§‹æå–</button>
  <pre id="output"></pre>

  <script>
    function extractLines(raw) {
      return raw.split("\n").map((line, idx) => {
        line = line.trim();
        if (!line) return null;

        let phone = "", url = "";

        if (line.includes("|")) {
          [phone, url] = line.split("|");
        } else if (line.includes(",")) {
          [phone, url] = line.split(",");
        } else if (line.includes("http") && line.includes("ç”µè¯")) {
          const phoneMatch = line.match(/ç”µè¯[:ï¼š]\s*([+\d]+)/);
          const urlMatch = line.match(/é“¾æ¥[:ï¼š]\s*(https?:\/\/\S+)/);
          if (phoneMatch) phone = phoneMatch[1];
          if (urlMatch) url = urlMatch[1];
        } else if (line.includes("http")) {
          const parts = line.split(/\s+/);
          if (parts.length === 2) {
            phone = parts[0];
            url = parts[1];
          } else {
            phone = "é“¾æ¥" + (idx + 1);
            url = line;
          }
        }

        return url ? { phone: phone || "é“¾æ¥" + (idx + 1), url: url.trim() } : null;
      }).filter(Boolean);
    }

    async function extractAll() {
      const input = document.getElementById("input").value;
      const entries = extractLines(input);
      const outputEl = document.getElementById("output");
      outputEl.textContent = "æ­£åœ¨å¤„ç† " + entries.length + " æ¡è®°å½•...\n";

      try {
        const res = await fetch("https://telegram-code-api-qd41.onrender.com", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(entries)
        });
const text = await res.text();
outputEl.textContent = text;

      } catch (e) {
        outputEl.textContent = "è¯·æ±‚å¤±è´¥ï¼š" + e.message;
      }
    }
  </script>

    <script>
    function copyResults() {
        const output = document.getElementById("output");
        const text = output.innerText || output.textContent;
        navigator.clipboard.writeText(text).then(() => {
            alert("ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
        }, err => {
            alert("å¤åˆ¶å¤±è´¥ï¼š" + err);
        });
    }
    </script>
    <button onclick="copyResults()" style="margin-top:10px;padding:6px 12px;">ğŸ“‹ ä¸€é”®å¤åˆ¶å…¨éƒ¨ç»“æœ</button>
    </body>
    
</html>
